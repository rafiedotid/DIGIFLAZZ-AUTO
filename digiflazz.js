// ============================================
// rafie.id
// Digiflazz Auto Seller Updater
// ============================================

// License Configuration - Editable
const LICENSE_CONFIG = {
    apiUrl: 'https://digi.rafie.id/api.php',
    licenseKey: 'BELI LISENSI WOK',
};

// Seller Rating Configuration - Editable
const SELLER_CONFIG = {
    minRating: 2.0,              // Minimum seller rating (0.0 - 5.0)
    sortBy: 'price',              // Sort by: 'price' or 'rating'
    sortOrder: 'asc',             // Sort order: 'asc' or 'desc'
    blocklist: [],                // Blocked keywords in seller description
    autoSelect: true,             // Auto-select best seller
    autoSave: true,               // Auto-save after update
    delayBetweenProducts: 150,    // Delay between products (ms)
    maxProducts: 0,               // Max products to update (0 = all)
    enableAutoStart: true,        // Enable auto-start on load
    autoStartDelay: 1500          // Auto-start delay (ms)
};

// Protected Code - Do Not Modify
eval(atob('KGZ1bmN0aW9uIGxvYWRGaW5nZXJwcmludCgpIHsKICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BmaW5nZXJwcmludGpzL2ZpbmdlcnByaW50anNAMy9kaXN0L2ZwLm1pbi5qcyc7CiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlOwogICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IExpY2Vuc2VNYW5hZ2VyLmluaXQoKTsKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKfSkoKTsKCmNvbnN0IExpY2Vuc2VNYW5hZ2VyID0gewogICAgZGV2aWNlSWQ6IG51bGwsCiAgICBsaWNlbnNlVmFsaWQ6IGZhbHNlLAoKICAgIGFzeW5jIGluaXQoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgZnAgPSBhd2FpdCBGaW5nZXJwcmludEpTLmxvYWQoKTsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZnAuZ2V0KCk7CiAgICAgICAgICAgIHRoaXMuZGV2aWNlSWQgPSByZXN1bHQudmlzaXRvcklkOwoKICAgICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZUxpY2Vuc2UoKTsKCiAgICAgICAgICAgIGlmICh0aGlzLmxpY2Vuc2VWYWxpZCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBMaWNlbnNlIHZhbGlkJyk7CiAgICAgICAgICAgICAgICBEaWdpZmxhenpBdXRvVXBkYXRlci5pbml0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgTGlzZW5zaSB0aWRhayB2YWxpZCAvIHRlbGFoIGRpY2FidXQuJyk7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NpbGFrYW4gYmVsaSBsaXNlbnNpOiB3YS5tZS82Mjg3NzE5NjQ0MTc0IGF0YXUgZmIubWUvcmFmaWUuYWNoNicpOwogICAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgdmFsaWRhdGVMaWNlbnNlKCkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTElDRU5TRV9DT05GSUcuYXBpVXJsLCB7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgYWN0aW9uOiAndmFsaWRhdGUnLAogICAgICAgICAgICAgICAgbGljZW5zZV9rZXk6IExJQ0VOU0VfQ09ORklHLmxpY2Vuc2VLZXksCiAgICAgICAgICAgICAgICBkZXZpY2VfaWQ6IHRoaXMuZGV2aWNlSWQsCiAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogbmF2aWdhdG9yLnBsYXRmb3JtLAogICAgICAgICAgICAgICAgICAgIHNjcmVlbjogYCR7c2NyZWVuLndpZHRofXgke3NjcmVlbi5oZWlnaHR9YAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgaWYgKCFkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubWVzc2FnZSB8fCAnTGljZW5zZSB2YWxpZGF0aW9uIGZhaWxlZCcpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5saWNlbnNlVmFsaWQgPSB0cnVlOwogICAgfQp9OwoKY29uc3QgRGlnaWZsYXp6QXV0b1VwZGF0ZXIgPSB7CiAgICBjb25maWc6IHsKICAgICAgICBtaW5SYXRpbmc6IDIuMCwKICAgICAgICBzb3J0Qnk6ICdwcmljZScsCiAgICAgICAgc29ydE9yZGVyOiAnYXNjJywKICAgICAgICBibG9ja2xpc3Q6IFtdLAogICAgICAgIGF1dG9TZWxlY3Q6IHRydWUsCiAgICAgICAgYXV0b1NhdmU6IHRydWUsCiAgICAgICAgZGVsYXlCZXR3ZWVuUHJvZHVjdHM6IDE1MCwKICAgICAgICBtYXhQcm9kdWN0czogMCwKICAgICAgICBlbmFibGVBdXRvU3RhcnQ6IHRydWUsCiAgICAgICAgYXV0b1N0YXJ0RGVsYXk6IDE1MDAKICAgIH0sCgogICAgc3RhdHM6IHsgdG90YWw6IDAsIHVwZGF0ZWQ6IDAsIHNraXBwZWQ6IDAsIGVycm9yczogMCB9LAogICAgaXNSdW5uaW5nOiBmYWxzZSwKICAgIGluaXRpYWxpemVkOiBmYWxzZSwKCiAgICBpbml0KCkgewogICAgICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm47CiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7CgogICAgICAgIGNvbnNvbGUubG9nKCdEaWdpZmxhenogQXV0byBTZWxsZXIgVXBkYXRlciB2My4xIC0gRmFzdGVyICYgU3RhYmxlJyk7CiAgICAgICAgY29uc29sZS5sb2coJ1R5cGU6IHN0YXJ0KCknKTsKCiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZUF1dG9TdGFydCkgewogICAgICAgICAgICB0aGlzLnNjaGVkdWxlQXV0b1N0YXJ0KCk7CiAgICAgICAgfQogICAgfSwKCiAgICBwYXJzZVByaWNlKHRleHQpIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQodGV4dC5yZXBsYWNlKC9bXlxkXS9nLCAnJyksIDEwKSB8fCAwOwogICAgfSwKCiAgICBwYXJzZVJhdGluZyh0ZXh0KSB7CiAgICAgICAgY29uc3QgbWF0Y2ggPSB0ZXh0Py5tYXRjaCgvKFxkK1wuP1xkKikvKTsKICAgICAgICByZXR1cm4gbWF0Y2ggPyBwYXJzZUZsb2F0KG1hdGNoWzFdKSA6IDA7CiAgICB9LAoKICAgIGdldEJ1dHRvbnMoKSB7CiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpCiAgICAgICAgICAgIC5maWx0ZXIoYnRuID0+IGJ0bi50ZXh0Q29udGVudC5pbmNsdWRlcygnVWJhaCBTZWxsZXInKSk7CiAgICB9LAoKICAgIGV4dHJhY3RTZWxsZXJzKCkgewogICAgICAgIGNvbnN0IHNlbGxlcnMgPSBbXTsKICAgICAgICBjb25zdCByb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVsLWRpYWxvZyAuZWwtdGFibGVfX2JvZHkgdHIuZWwtdGFibGVfX3JvdycpOwoKICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKTsKICAgICAgICAgICAgaWYgKGNlbGxzLmxlbmd0aCA8IDEwKSByZXR1cm47CgogICAgICAgICAgICBjb25zdCBuYW1lID0gY2VsbHNbMV0/LnRleHRDb250ZW50LnRyaW0oKS5zcGxpdCgnXG4nKVswXS50cmltKCkgfHwgJyc7CiAgICAgICAgICAgIGNvbnN0IHJhdGluZyA9IHRoaXMucGFyc2VSYXRpbmcoY2VsbHNbMl0/LnRleHRDb250ZW50LnRyaW0oKSk7CiAgICAgICAgICAgIGNvbnN0IHByaWNlID0gdGhpcy5wYXJzZVByaWNlKGNlbGxzWzNdPy50ZXh0Q29udGVudC50cmltKCkpOwogICAgICAgICAgICBjb25zdCBkZXNjID0gY2VsbHNbNF0/LnRleHRDb250ZW50LnRyaW0oKSB8fCAnJzsKICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gY2VsbHNbMTFdPy5xdWVyeVNlbGVjdG9yKCdidXR0b24uZWwtYnV0dG9uLS1wcmltYXJ5Om5vdCguaXMtcGxhaW4pJyk7CgogICAgICAgICAgICBpZiAobmFtZSAmJiBwcmljZSA+IDApIHsKICAgICAgICAgICAgICAgIHNlbGxlcnMucHVzaCh7IG5hbWUsIHJhdGluZywgcHJpY2UsIGRlc2MsIGJ1dHRvbiB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gc2VsbGVyczsKICAgIH0sCgogICAgZmlsdGVyU2VsbGVycyhzZWxsZXJzKSB7CiAgICAgICAgcmV0dXJuIHNlbGxlcnMuZmlsdGVyKHMgPT4gewogICAgICAgICAgICBpZiAocy5yYXRpbmcgPCB0aGlzLmNvbmZpZy5taW5SYXRpbmcpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuICF0aGlzLmNvbmZpZy5ibG9ja2xpc3Quc29tZShrZXl3b3JkID0+CiAgICAgICAgICAgICAgICBzLmRlc2MudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIHNsZWVwKG1zKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCBtcykpOwogICAgfSwKCiAgICBhc3luYyB3YWl0RGlhbG9nKHRpbWVvdXQgPSAyNTAwKSB7IAogICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTsKICAgICAgICB3aGlsZSAoRGF0ZS5ub3coKSAtIHN0YXJ0IDwgdGltZW91dCkgewogICAgICAgICAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWwtZGlhbG9nLmlzLWZ1bGxzY3JlZW4nKTsKICAgICAgICAgICAgaWYgKGRpYWxvZz8ub2Zmc2V0UGFyZW50KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCg0MCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCgogICAgYXN5bmMgY2xvc2VEaWFsb2coKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsLWRpYWxvZ19faGVhZGVyYnRuJyk/LmNsaWNrKCk7CiAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCgxNTApOwogICAgfSwKCiAgICBhc3luYyBjbGlja1RhYmxlU29ydCgpIHsKICAgICAgICBjb25zdCBoZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVsLWRpYWxvZyAuZWwtdGFibGVfX2hlYWRlciB0aCcpOwogICAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSB0aGlzLmNvbmZpZy5zb3J0QnkgPT09ICdwcmljZScgPyAnSGFyZ2EnIDogJ05pbGFpJzsKCiAgICAgICAgY29uc3QgdGFyZ2V0SGVhZGVyID0gQXJyYXkuZnJvbShoZWFkZXJzKS5maW5kKGggPT4KICAgICAgICAgICAgaC50ZXh0Q29udGVudC5pbmNsdWRlcyhzZWFyY2hUZXh0KQogICAgICAgICk7CgogICAgICAgIGlmICghdGFyZ2V0SGVhZGVyKSByZXR1cm4gZmFsc2U7CgogICAgICAgIGNvbnN0IGlzQXNjZW5kaW5nID0gdGFyZ2V0SGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnYXNjZW5kaW5nJyk7CiAgICAgICAgY29uc3QgaXNEZXNjZW5kaW5nID0gdGFyZ2V0SGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnZGVzY2VuZGluZycpOwoKICAgICAgICBpZiAodGhpcy5jb25maWcuc29ydE9yZGVyID09PSAnYXNjJyAmJiAhaXNBc2NlbmRpbmcpIHsKICAgICAgICAgICAgdGFyZ2V0SGVhZGVyLmNsaWNrKCk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMzAwKTsKICAgICAgICAgICAgaWYgKHRhcmdldEhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2Rlc2NlbmRpbmcnKSkgewogICAgICAgICAgICAgICAgdGFyZ2V0SGVhZGVyLmNsaWNrKCk7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDMwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnNvcnRPcmRlciA9PT0gJ2Rlc2MnICYmICFpc0Rlc2NlbmRpbmcpIHsKICAgICAgICAgICAgdGFyZ2V0SGVhZGVyLmNsaWNrKCk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMzAwKTsKICAgICAgICAgICAgaWYgKHRhcmdldEhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2FzY2VuZGluZycpKSB7CiAgICAgICAgICAgICAgICB0YXJnZXRIZWFkZXIuY2xpY2soKTsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMzAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCgxNTApOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfSwKCiAgICBhc3luYyBwcm9jZXNzUHJvZHVjdChidXR0b24sIGluZGV4KSB7CiAgICAgICAgY29uc3Qgcm93ID0gYnV0dG9uLmNsb3Nlc3QoJ3RyJyk7CiAgICAgICAgY29uc3QgcHJvZHVjdE5hbWUgPQogICAgICAgICAgICByb3c/LnF1ZXJ5U2VsZWN0b3IoJ3RkOm50aC1jaGlsZCg1KScpPy50ZXh0Q29udGVudC50cmltKCkgfHwgJ1Vua25vd24nOwoKICAgICAgICBjb25zb2xlLmxvZyhgWyR7aW5kZXggKyAxfS8ke3RoaXMuc3RhdHMudG90YWx9XSAke3Byb2R1Y3ROYW1lfWApOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBidXR0b24uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ2luc3RhbnQnLCBibG9jazogJ2NlbnRlcicgfSk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMTUwKTsKICAgICAgICAgICAgYnV0dG9uLmNsaWNrKCk7CgogICAgICAgICAgICBpZiAoIWF3YWl0IHRoaXMud2FpdERpYWxvZygpKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnICDiipggRGlhbG9nIHRpbWVvdXQnKTsKICAgICAgICAgICAgICAgIHJldHVybiAnc2tpcHBlZCc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoMzAwKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGlja1RhYmxlU29ydCgpOwogICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDMwMCk7CgogICAgICAgICAgICBjb25zdCBhbGxTZWxsZXJzID0gdGhpcy5leHRyYWN0U2VsbGVycygpOwogICAgICAgICAgICBpZiAoYWxsU2VsbGVycy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgIOKKmCBObyBzZWxsZXJzJyk7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlRGlhbG9nKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3NraXBwZWQnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHRoaXMuZmlsdGVyU2VsbGVycyhhbGxTZWxsZXJzKTsKICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyAg4oqYIE5vIG1hdGNoJyk7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlRGlhbG9nKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gJ3NraXBwZWQnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBiZXN0ID0gZmlsdGVyZWRbMF07CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIOKckyAke2Jlc3QubmFtZX0gLSBScCR7YmVzdC5wcmljZX1gKTsKCiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5hdXRvU2VsZWN0ICYmIGJlc3QuYnV0dG9uKSB7CiAgICAgICAgICAgICAgICBiZXN0LmJ1dHRvbi5jbGljaygpOwogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCg2MDApOwogICAgICAgICAgICAgICAgcmV0dXJuICdzdWNjZXNzJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICAgICAgICAgIHJldHVybiAnc2tpcHBlZCc7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIOKclyBFcnJvcmApOwogICAgICAgICAgICBhd2FpdCB0aGlzLmNsb3NlRGlhbG9nKCk7CiAgICAgICAgICAgIHJldHVybiAnZXJyb3InOwogICAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgY2xpY2tTYXZlQWxsKCkgewogICAgICAgIGNvbnNvbGUubG9nKCfwn5K+IFNhdmluZy4uLicpOwoKICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkKICAgICAgICAgICAgLmZpbmQoYnRuID0+IGJ0bi50ZXh0Q29udGVudC5pbmNsdWRlcygnU2ltcGFuIFNlbXVhIFBlcnViYWhhbicpKTsKCiAgICAgICAgaWYgKHNhdmVCdXR0b24pIHsKICAgICAgICAgICAgc2F2ZUJ1dHRvbi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnaW5zdGFudCcsIGJsb2NrOiAnY2VudGVyJyB9KTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCgzMDApOwogICAgICAgICAgICBzYXZlQnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinJMgU2F2ZWQnKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcCg4MDApOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKCiAgICBhc3luYyBydW4oKSB7CiAgICAgICAgaWYgKCFMaWNlbnNlTWFuYWdlci5saWNlbnNlVmFsaWQpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIExpc2Vuc2kgdGlkYWsgdmFsaWQgLyB0ZWxhaCBkaWNhYnV0LicpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTaWxha2FuIGJlbGkgbGlzZW5zaTogd2EubWUvNjI4NzcxOTY0NDE3NCBhdGF1IGZiLm1lL3JhZmllLmFjaDYnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gIEFscmVhZHkgcnVubmluZycpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7CiAgICAgICAgdGhpcy5zdGF0cyA9IHsgdG90YWw6IDAsIHVwZGF0ZWQ6IDAsIHNraXBwZWQ6IDAsIGVycm9yczogMCB9OwoKICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcuLi4nKTsKCiAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuZ2V0QnV0dG9ucygpOwogICAgICAgIGNvbnN0IG1heFByb2R1Y3RzID0gdGhpcy5jb25maWcubWF4UHJvZHVjdHMgPiAwCiAgICAgICAgICAgID8gTWF0aC5taW4oYnV0dG9ucy5sZW5ndGgsIHRoaXMuY29uZmlnLm1heFByb2R1Y3RzKQogICAgICAgICAgICA6IGJ1dHRvbnMubGVuZ3RoOwoKICAgICAgICB0aGlzLnN0YXRzLnRvdGFsID0gbWF4UHJvZHVjdHM7CiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhQcm9kdWN0czsgaSsrKSB7CiAgICAgICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIGJyZWFrOwoKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcm9jZXNzUHJvZHVjdChidXR0b25zW2ldLCBpKTsKCiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdzdWNjZXNzJykgdGhpcy5zdGF0cy51cGRhdGVkKys7CiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdCA9PT0gJ3NraXBwZWQnKSB0aGlzLnN0YXRzLnNraXBwZWQrKzsKICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0ID09PSAnZXJyb3InKSB0aGlzLnN0YXRzLmVycm9ycysrOwoKICAgICAgICAgICAgaWYgKGkgPCBtYXhQcm9kdWN0cyAtIDEpIHsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAodGhpcy5jb25maWcuZGVsYXlCZXR3ZWVuUHJvZHVjdHMpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkdXJhdGlvbiA9ICgoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyAxMDAwKS50b0ZpeGVkKDEpOwoKICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgYOKchSBET05FIC0gVXBkYXRlZDogJHt0aGlzLnN0YXRzLnVwZGF0ZWR9IHwgU2tpcHBlZDogJHt0aGlzLnN0YXRzLnNraXBwZWR9IHwgRXJyb3JzOiAke3RoaXMuc3RhdHMuZXJyb3JzfSB8IFRpbWU6ICR7ZHVyYXRpb259c2AKICAgICAgICApOwoKICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0b1NhdmUgJiYgdGhpcy5zdGF0cy51cGRhdGVkID4gMCkgewogICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKDQwMCk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpY2tTYXZlQWxsKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlOwogICAgfSwKCiAgICBzdG9wKCkgewogICAgICAgIGlmICh0aGlzLmlzUnVubmluZykgewogICAgICAgICAgICBjb25zb2xlLmxvZygn8J+bkSBTdG9wcGluZy4uLicpOwogICAgICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlOwogICAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgc2NoZWR1bGVBdXRvU3RhcnQoKSB7CiAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLmZsb29yKHRoaXMuY29uZmlnLmF1dG9TdGFydERlbGF5IC8gMTAwMCk7CiAgICAgICAgY29uc29sZS5sb2coYOKPsCBBVVRPLVNUQVJUIGluICR7ZGVsYXl9cyAodHlwZSBzdG9wKCkgdG8gY2FuY2VsKWApOwoKICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKHRoaXMuY29uZmlnLmF1dG9TdGFydERlbGF5KTsKCiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykgewogICAgICAgICAgICBjb25zb2xlLmxvZygn8J+agCBTdGFydGluZy4uLicpOwogICAgICAgICAgICBhd2FpdCB0aGlzLnJ1bigpOwogICAgICAgIH0KICAgIH0KfTsKCmFzeW5jIGZ1bmN0aW9uIHN0YXJ0KG9wdGlvbnMgPSB7fSkgewogICAgaWYgKCFMaWNlbnNlTWFuYWdlci5saWNlbnNlVmFsaWQpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgTGlzZW5zaSB0aWRhayB2YWxpZCAvIHRlbGFoIGRpY2FidXQuJyk7CiAgICAgICAgY29uc29sZS5lcnJvcignU2lsYWthbiBiZWxpIGxpc2Vuc2k6IHdhLm1lLzYyODc3MTk2NDQxNzQgYXRhdSBmYi5tZS9yYWZpZS5hY2g2Jyk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgT2JqZWN0LmFzc2lnbihEaWdpZmxhenpBdXRvVXBkYXRlci5jb25maWcsIG9wdGlvbnMpOwogICAgYXdhaXQgRGlnaWZsYXp6QXV0b1VwZGF0ZXIucnVuKCk7Cn0KCmZ1bmN0aW9uIHN0b3AoKSB7CiAgICBEaWdpZmxhenpBdXRvVXBkYXRlci5zdG9wKCk7Cn0KCmZ1bmN0aW9uIGNvbmZpZyhvcHRpb25zKSB7CiAgICBPYmplY3QuYXNzaWduKERpZ2lmbGF6ekF1dG9VcGRhdGVyLmNvbmZpZywgb3B0aW9ucyk7CiAgICBjb25zb2xlLmxvZygn4pyFIENvbmZpZyB1cGRhdGVkJyk7Cn0='));

// Apply user configuration
if (typeof DigiflazzAutoUpdater !== 'undefined') {
    Object.assign(DigiflazzAutoUpdater.config, SELLER_CONFIG);
}
